<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.TbUserMapper">
    <resultMap id="BaseResultMap" type="com.example.demo.entity.TbUser">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun May 03 09:50:20 GMT+08:00 2020.
        -->
        <constructor>
            <arg column="user_id" javaType="java.lang.Integer" jdbcType="INTEGER"/>
            <arg column="user_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="user_phone" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="user_adress" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="user_pwd" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="user_email" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="user_sex" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="user_regtime" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        </constructor>
    </resultMap>
    <insert id="insert" parameterType="com.example.demo.entity.TbUser">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun May 03 09:50:20 GMT+08:00 2020.
        -->
        insert into tb_user (user_id, user_name, user_phone,
        user_adress, user_pwd, user_email,
        user_sex, user_regtime)
        values (#{userId,jdbcType=INTEGER}, #{userName,jdbcType=VARCHAR}, #{userPhone,jdbcType=VARCHAR},
        #{userAdress,jdbcType=VARCHAR}, #{userPwd,jdbcType=VARCHAR}, #{userEmail,jdbcType=VARCHAR},
        #{userSex,jdbcType=VARCHAR}, #{userRegtime,jdbcType=TIMESTAMP})
    </insert>
    <insert id="insertSelective" parameterType="com.example.demo.entity.TbUser">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun May 03 09:50:20 GMT+08:00 2020.
        -->
        insert into tb_user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="userId != null">
                user_id,
            </if>
            <if test="userName != null">
                user_name,
            </if>
            <if test="userPhone != null">
                user_phone,
            </if>
            <if test="userAdress != null">
                user_adress,
            </if>
            <if test="userPwd != null">
                user_pwd,
            </if>
            <if test="userEmail != null">
                user_email,
            </if>
            <if test="userSex != null">
                user_sex,
            </if>
            <if test="userRegtime != null">
                user_regtime,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="userId != null">
                #{userId,jdbcType=INTEGER},
            </if>
            <if test="userName != null">
                #{userName,jdbcType=VARCHAR},
            </if>
            <if test="userPhone != null">
                #{userPhone,jdbcType=VARCHAR},
            </if>
            <if test="userAdress != null">
                #{userAdress,jdbcType=VARCHAR},
            </if>
            <if test="userPwd != null">
                #{userPwd,jdbcType=VARCHAR},
            </if>
            <if test="userEmail != null">
                #{userEmail,jdbcType=VARCHAR},
            </if>
            <if test="userSex != null">
                #{userSex,jdbcType=VARCHAR},
            </if>
            <if test="userRegtime != null">
                #{userRegtime,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <select id="selectAll" resultMap="BaseResultMap" parameterType="com.example.demo.entity.TbUser">
            select *
            from tb_user
    </select>
    <select id="selectForLogin" parameterType="java.lang.String" resultType="Integer">
        select count(*) from  tb_user
        where user_phone=#{phone,jdbcType=VARCHAR}
        and user_pwd =#{user_pwd,jdbcType=VARCHAR}
    </select>
    <select id="selectByUserPhone" parameterType="java.lang.String" resultType="Integer">
        select count(*)
        from  tb_user
        where user_phone=#{phone,jdbcType=VARCHAR}
    </select>
    <insert id="addUserByInfo" parameterType="java.lang.String">
        INSERT INTO test.tb_user (user_phone, user_pwd)
        VALUES (#{phone},#{user_pwd})
    </insert>
    <select id="selectAllByStr" parameterType="java.lang.String" resultMap="BaseResultMap"
    >
        select *
        from tb_user
        where
        user_name like CONCAT('%',#{Keyword},'%') or
        user_phone like CONCAT('%',#{Keyword},'%')or
        user_id like CONCAT('%',#{Keyword},'%')
    </select>
    <select id="selectAllByPhone" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_user
        where
        user_phone like CONCAT('%',#{Keyword},'%')
    </select>
    <select id="selectAllById" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_user
        where
        user_name like CONCAT('%',#{Keyword},'%')
    </select>
    <select id="selectAllByName" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_user
        where
        user_name like CONCAT('%',#{Keyword},'%')
    </select>
</mapper>