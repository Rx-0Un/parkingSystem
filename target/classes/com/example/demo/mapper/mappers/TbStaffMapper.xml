<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.TbStaffMapper">
    <resultMap id="BaseResultMap" type="com.example.demo.entity.TbStaff">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sat Mar 07 15:53:12 GMT+08:00 2020.
        -->
        <constructor>
            <arg column="staff_id" javaType="java.lang.Integer" jdbcType="INTEGER"/>
            <arg column="staff_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="staff_phone" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="staff_login_pwd" javaType="java.lang.String" jdbcType="VARCHAR"/>
            <arg column="staff_type" javaType="java.lang.Integer" jdbcType="INTEGER"/>
            <arg column="last_time_login" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        </constructor>
    </resultMap>
    <insert id="insert" parameterType="com.example.demo.entity.TbStaff">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sat Mar 07 15:53:12 GMT+08:00 2020.
        -->
        insert into tb_staff (staff_id, staff_name, staff_phone,
        staff_login_pwd, staff_type, last_time_login
        )
        values (#{staffId,jdbcType=INTEGER}, #{staffName,jdbcType=VARCHAR}, #{staffPhone,jdbcType=VARCHAR},
        #{staffLoginPwd,jdbcType=VARCHAR}, #{staffType,jdbcType=INTEGER}, #{lastTimeLogin,jdbcType=TIMESTAMP}
        )
    </insert>
    <insert id="insertSelective" parameterType="com.example.demo.entity.TbStaff">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sat Mar 07 15:53:12 GMT+08:00 2020.
        -->
        insert into tb_staff
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="staffId != null">
                staff_id,
            </if>
            <if test="staffName != null">
                staff_name,
            </if>
            <if test="staffPhone != null">
                staff_phone,
            </if>
            <if test="staffLoginPwd != null">
                staff_login_pwd,
            </if>
            <if test="staffType != null">
                staff_type,
            </if>
            <if test="lastTimeLogin != null">
                last_time_login,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="staffId != null">
                #{staffId,jdbcType=INTEGER},
            </if>
            <if test="staffName != null">
                #{staffName,jdbcType=VARCHAR},
            </if>
            <if test="staffPhone != null">
                #{staffPhone,jdbcType=VARCHAR},
            </if>
            <if test="staffLoginPwd != null">
                #{staffLoginPwd,jdbcType=VARCHAR},
            </if>
            <if test="staffType != null">
                #{staffType,jdbcType=INTEGER},
            </if>
            <if test="lastTimeLogin != null">
                #{lastTimeLogin,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <select id="selectForLogin" parameterType="java.lang.String" resultType="Integer">
        select count(*) from  tb_staff
        where staff_name=#{staff_name,jdbcType=VARCHAR}
        and staff_login_pwd =#{staff_login_pwd,jdbcType=VARCHAR}
  </select>
    <select id="selectByUserName" parameterType="java.lang.String" resultType="Integer">
        select count(*)
        from  tb_staff
        where staff_name=#{staff_name,jdbcType=VARCHAR}
  </select>
    <select id="selectIdByName" parameterType="java.lang.String" resultType="Integer">
        select staff_id
        from  tb_staff
        where staff_name=#{staff_name,jdbcType=VARCHAR}
  </select>
    <select id="selectAll" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
  </select>
    <select id="selectByFuzzyStr" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
        where
        staff_id like CONCAT('%',#{string},'%') or
        staff_name like CONCAT('%',#{string},'%')or
        staff_phone like CONCAT('%',#{string},'%') or
        staff_type like CONCAT('%',#{string},'%')
  </select>
    <select id="selectByFuzzyName" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
        where
        staff_name like CONCAT('%',#{string},'%')
  </select>
    <select id="selectByFuzzyId" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
        where
        staff_id like CONCAT('%',#{string},'%')
  </select>
    <select id="selectByFuzzyPhone" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
        where
        staff_phone like CONCAT('%',#{string},'%')
  </select>
    <select id="selectByFuzzyStrAndType" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
        where
        staff_type = #{type,jdbcType=VARCHAR} and
        (staff_id like CONCAT('%',#{string},'%') or
        staff_name like CONCAT('%',#{string},'%')or
        staff_phone like CONCAT('%',#{string},'%'))
    </select>
    <select id="selectByFuzzyNameAndType" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
        where
        staff_type = #{type,jdbcType=VARCHAR} and
        staff_name like CONCAT('%',#{string},'%')
    </select>
    <select id="selectByFuzzyPhoneAndType" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
        where
        staff_type = #{type,jdbcType=VARCHAR} and
        staff_phone like CONCAT('%',#{string},'%')
    </select>
    <select id="selectByFuzzyIdAndType" parameterType="java.lang.String" resultMap="BaseResultMap">
        select *
        from tb_staff
        where
        staff_type = #{type,jdbcType=VARCHAR} and
        (staff_id like CONCAT('%',#{string},'%')
    </select>
    <insert id="insertStaff" parameterType="java.lang.String">
        INSERT INTO test.tb_staff (staff_name, staff_phone, staff_login_pwd, staff_type, last_time_login)
        VALUES (#{staffName,jdbcType=VARCHAR}, #{staffPhone,jdbcType=VARCHAR}, '123456', #{staffType,jdbcType=VARCHAR}, curdate())
    </insert>
    <delete id="deleteStaffById" parameterType="java.lang.Integer">
        DELETE FROM test.tb_staff WHERE staff_id = #{staffId}
    </delete>
    <select id="selectAllIdAndName" parameterType="java.lang.String" resultType="Map">
        select staff_id,staff_name
        from tb_staff
    </select>
</mapper>